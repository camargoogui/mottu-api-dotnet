# üóÑÔ∏è INSTRU√á√ïES PARA CONFIGURA√á√ÉO DO BANCO DE DADOS

## üìã Status das Migrations

‚úÖ **Migrations criadas com sucesso!**
- Arquivo: `MottuApi.Infrastructure/Migrations/20250905214712_InitialCreate.cs`
- Status: Pronto para aplica√ß√£o no banco

## üöÄ Como Executar as Migrations

### **Op√ß√£o 1: Executar via EF Core (Recomendado)**
```bash
# Navegar para a pasta Infrastructure
cd MottuApi/MottuApi.Infrastructure

# Aplicar migrations
dotnet ef database update --startup-project ../MottuApi.Presentation
```

### **Op√ß√£o 2: Executar Script SQL Manual**
Se o Oracle n√£o estiver acess√≠vel via EF Core, execute o script SQL manual:

1. **Conectar ao Oracle** usando SQL Developer, SQL*Plus ou similar
2. **Executar o script**: `script_oracle.sql`
3. **Verificar cria√ß√£o** das tabelas

## üìä Estrutura das Tabelas Criadas

### **Tabela: Filiais**
```sql
CREATE TABLE Filiais (
    Id NUMBER(10) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    Nome NVARCHAR2(100) NOT NULL,
    Endereco_Logradouro NVARCHAR2(100) NOT NULL,
    Endereco_Numero NVARCHAR2(10) NOT NULL,
    Endereco_Complemento NVARCHAR2(50),
    Endereco_Bairro NVARCHAR2(50) NOT NULL,
    Endereco_Cidade NVARCHAR2(50) NOT NULL,
    Endereco_Estado NVARCHAR2(2) NOT NULL,
    Endereco_CEP NVARCHAR2(8) NOT NULL,
    Telefone NVARCHAR2(15) NOT NULL,
    Ativo NUMBER(1) DEFAULT 1 NOT NULL,
    DataCriacao TIMESTAMP(7) DEFAULT CURRENT_TIMESTAMP NOT NULL,
    DataAtualizacao TIMESTAMP(7)
);
```

### **Tabela: Motos**
```sql
CREATE TABLE Motos (
    Id NUMBER(10) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    Placa NVARCHAR2(7) NOT NULL,
    Modelo NVARCHAR2(50) NOT NULL,
    Ano NUMBER(10) NOT NULL,
    Cor NVARCHAR2(30) NOT NULL,
    Disponivel NUMBER(1) DEFAULT 1 NOT NULL,
    DataCriacao TIMESTAMP(7) DEFAULT CURRENT_TIMESTAMP NOT NULL,
    DataAtualizacao TIMESTAMP(7),
    FilialId NUMBER(10) NOT NULL,
    CONSTRAINT FK_Motos_Filiais_FilialId 
        FOREIGN KEY (FilialId) 
        REFERENCES Filiais(Id) 
        ON DELETE RESTRICT
);
```

## üîß Configura√ß√£o da String de Conex√£o

Verifique se a string de conex√£o est√° correta no `appsettings.json`:

```json
{
  "ConnectionStrings": {
    "OracleConnection": "User Id=SEU_USUARIO;Password=SUA_SENHA;Data Source=localhost:1521/XE;"
  }
}
```

## üß™ Dados de Exemplo

O script inclui dados de exemplo:
- **2 Filiais**: S√£o Paulo e Rio de Janeiro
- **3 Motos**: Honda CG 160, Yamaha Fazer 250, Honda Biz 125

## ‚úÖ Verifica√ß√£o

Ap√≥s executar o script, verifique se as tabelas foram criadas:

```sql
-- Verificar tabelas
SELECT table_name FROM user_tables WHERE table_name IN ('FILIAIS', 'MOTOS');

-- Verificar dados
SELECT 'Filiais' as Tabela, COUNT(*) as Registros FROM Filiais
UNION ALL
SELECT 'Motos' as Tabela, COUNT(*) as Registros FROM Motos;
```

## üö® Solu√ß√£o de Problemas

### **Erro de Conex√£o Oracle**
- Verifique se o Oracle est√° rodando
- Confirme a string de conex√£o
- Teste a conex√£o com SQL Developer

### **Erro de Permiss√µes**
- Execute como usu√°rio com privil√©gios DDL
- Verifique se o usu√°rio tem permiss√£o para criar tabelas

### **Erro de Espa√ßo**
- Verifique se h√° espa√ßo suficiente no tablespace
- Execute `SELECT * FROM user_tablespaces;`

## üéØ Pr√≥ximos Passos

1. ‚úÖ Executar script SQL
2. ‚úÖ Testar conex√£o da API
3. ‚úÖ Executar aplica√ß√£o
4. ‚úÖ Testar endpoints via Swagger

---

**Status**: ‚úÖ Migrations criadas e prontas para execu√ß√£o!
